---
title: My magic mirror
heading: MagicMirror
lang: en
lead: mirror mirror on the wall
when: 2017
img: proj_mm.jpg
img-color: 113C9C
last-modified: 2017-01-14
---
<article class="content">

    <section>
        <h3>Day 1 - Look what the cat dragged in from the street</h3>
        <p>Found an old monitor from Acer (Model AL1716) in the streets for free. A backup monitor is always
            welcome so I took him home with me.</p>

        <h3>Day 2 - Again?</h3>
        <p>Girlfriends asks me in the morning when she is getting ready to work while I can stay in bed
            for another hour what time it is and when the next tram will leave from the nearest station...</p>

        <h3>Day 3 - Is this groundhog day?</h3>
        <p>Girlfriends asks me again in the morning what time it is and when the next tram will leave from the nearest
            station. Twice this time because she is in such a hurry...</p>
        <h3>Day 100 - Enough is Enough!</h3>
        <p>Girlfriends asks me like everyday in the morning several time what time it is and when the next tram will
            leave from the nearest station...</p>
        <p>I open my regular computer magazine the
        <a href="https://www.heise.de/ct/ausgabe/2017-6-Raspberry-beschreibt-Spiegel-3636486.html">c't</a> and find an
            article about on how you can build yourself a magic mirror that is both mirror and display. Powered by a
            RaspberryPI you can show all kinds of information on it like the weather, a clock and even other modules
            since it is open-source. Is there a module for displaying the local transportation system? Yes, there is
            and there is still this old monitor somewhere around here so let's get started.</p>
        <p>Neat, I still have a RaspberryPI Model 1 too so lets format the sd card, install the standard OS and follow
            the instruction on the projects homepage.</p>
        <p>Damn, the installation process won't finish, since the minimum version due to performance reasons is a Model
            2. The MagicMirror-software is written in javascript and bundled via the Electron-app. While this makes it
            easier for me to hack on it myself, it takes it toll on the processing power of the PI.</p>
        <p>But that isn't a crisis but merely an opportunity to buy a brandnew Model 3. So a few days later I have
        a package in the mailbox. Time to assemble...</p>

        <h3>Day 101 - A trip to the hardware store</h3>
        <div class="content-box">
            {{> figure-popup
                class='fig_left landscape'
                img='/img/projects/magicmirror/projMM_01_fitting'
                caption='First fitting successfull'}}
            <p>Okay, so first I get rid of all the plastic covers of the display. What do I need now...</p>
            <ul>
                <li>Simple image frame just large enough for the display to fit into</li>
                <li>Some semi-transparent, half-reflecting sheet to put on the frame glass</li>
                <li>A HDMI-DVI converter since the display is so old that it only has VGA or DVI inputs</li>
                <li>A VESA wall mount</li>
                <li>Screws and cables</li>
            </ul>
        </div>
        {{> figure-popup
            class='fig_right landscape'
            img='/img/projects/magicmirror/projMM_02_assembled'
            caption='Screws and the PI are in place'}}
        <p>A quick trip to the local hardware store yields a nearly perfectly fitting frame. The sheet is ordered on the
            internet. While I wait for it to arrive, I already start to assemble the display into the frame.
        </p>

        <h3>Day Y - Don't move!</h3>
        <div class="content-box">
            <p>Time to check how expensive this thing will be if I run it 24h nonstop for a year.... Lets see, the pi takes
                around 4 kw, the monitor 25, round it up to 30, multiply it with a lot of zeros to get the per year amount.
                Multiply by 0.28cents per kwh... 70 EUR??? Nope, too much, the monitor has to be put in standby if noone is
                near...</p>
            {{> figure-popup
                class='fig_right landscape'
                img='/img/projects/magicmirror/projMM_03_install'
                caption='Installing the OS'}}
        </div>

        <p>Good thing there is a module for that, the <a href="https://github.com/alexyak/motiondetector">motiondetector</a>.
            The documentation is non-existing but with a little guess work and looking at the code I came up with this
            config:</p>
        <code>
            config: {<br>
            &nbsp;&nbsp;&nbsp;&nbsp;captureIntervalTime: 1000,<br>
            &nbsp;&nbsp;&nbsp;&nbsp;scoreThreshold: 100,<br>
            &nbsp;&nbsp;&nbsp;&nbsp;timeout: 120000<br>
            }
        </code>

        <div class="content-box">
            <p>But, what camera do I use? Should I buy one especially for the pi and which one is working out of the
            box with this software? Wait, what... the ps3 move camera is working with the pi too and can be plugged just into
            the usb ports? Good thing I have one of these lying around too, this sounds way to good to be true (and I didnt
            play those ps3 move games anyway :-)</p>
            {{> figure-popup
                class='fig_right portrait'
                img='/img/projects/magicmirror/projMM_04_wall'
                caption='Painted and assembled 2k16 version'}}
        </div>

        <h3>Days to come: - Listen to me!</h3>
        <p>With the ps3 doing the motion detection, I now turn my eye to voice recognition. How cool would it be if I could
            tell my magicmirror to turn on the music? So, lets see if the ps3 microphone is also working outofthebox.
            Plug it in aaaand...</p>
        <p>Well, it does show up using this command:</p>
        <code>cat /proc/asound/cards<br>
            0 [ALSA]: bcm2835 - bcm2835 ALSA<br>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bcm2835 ALSA<br>
            1 [CameraB409241]: USB-Audio - USB Camera-B4.09.24.1<br>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OmniVision Technologies, Inc. USB Camera-B4.09.24.1 at usb-3f980000.usb-1.3, hi
        </code>
        <p>but how do I find out if it actually records?
            <a href="https://www.raspberrypi.org/forums/viewtopic.php?f=38&t=15851#p180474">NielsMayer</a> has some good
            tips on how to get your mic configured and also wrote this command:</p>
            <code>arecord -vv /dev/null -r 16000 -f S16_LE -c 4 -D iec958:CARD=CameraB409241,DEV=0 /dev/null &lt; /dev/null</code>
         <p>

         </p>
    </section>
</article>
